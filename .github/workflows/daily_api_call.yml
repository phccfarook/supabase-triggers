# .github/workflows/daily_api_call.yml

name: Call Supabase Function Daily

on:
  # This schedule triggers the workflow at 8:00 AM UTC every day.
  schedule:
    - cron: '0 8 * * *'
  
  # This line allows you to manually run the workflow from the Actions tab on GitHub.
  workflow_dispatch:

jobs:
  call-api-job:
    runs-on: ubuntu-latest
    steps:
      - name: Call Supabase Edge Function via cURL
        run: |
          curl -L -X POST 'https://npwbxlvcfrawolebzawn.supabase.co/functions/v1/quadrate-ai-proxy' \
            -H 'Authorization: Bearer ${{ secrets.SUPABASE_ANON_KEY }}' \
            -H 'Content-Type: application/json' \
            -d '{
              "prompt": "Explain what a Supabase Edge Function is in two sentences."
            }'
